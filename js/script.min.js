const inputElement=document.querySelector(".card-start__input"),uloadPopup=document.querySelector(".card-upload"),successfullyPopup=document.querySelector(".card-successfully"),startPopup=document.querySelector(".card-start"),dropbox=document.querySelector(".card-start__drop"),next=document.querySelector(".next"),copyBtn=document.querySelector(".card-successfully__btn");function displayImage(){if(this.files[0]){let e=new FileReader,t=document.querySelector(".card-successfully__link");t.textContent="http://image-uploader-master/user_img/"+this.files[0].name,copyBtn.addEventListener("click",(function(){copyToClipboard(t.textContent)})),e.onload=function(e){document.querySelector(".user-img").setAttribute("src",e.target.result)},e.readAsDataURL(this.files[0])}}function displayImageDrop(e){if(e[0]){let t=new FileReader;t.onload=function(t){document.querySelector(".user-img").setAttribute("src",t.target.result);let o=document.querySelector(".card-successfully__link");o.textContent="http://image-uploader-master/user_img/"+e[0].name,copyBtn.addEventListener("click",(function(){copyToClipboard(o.textContent)}))},t.readAsDataURL(e[0])}}function previewFile(e){let t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){document.querySelector(".user-img").src=t.result}}function handleFiles(){const e=this.files;"image/jpeg"!=e[0].type&&"image/png"!=e[0].type||(initializeProgress(),uploadFile(e[0]))}function uploadFile(e){var t=new FormData;t.append("file",e);var o=new XMLHttpRequest;o.open("POST","processForm.php",!0),o.onload=function(e){200==o.status&&progressDone()},o.send(t)}function initializeProgress(){startPopup.classList.add("card-start_hide"),uloadPopup.classList.add("card-upload_active")}function progressDone(){uloadPopup.classList.remove("card-upload_active"),successfullyPopup.classList.add("card-successfully_active")}function handleFilesDrop(e){const t=e;console.log(t),"image/jpeg"!=t[0].type&&"image/png"!=t[0].type||(initializeProgress(),uploadFile(e[0]))}function dragenter(e){e.stopPropagation(),e.preventDefault()}function dragover(e){e.stopPropagation(),e.preventDefault()}function drop(e){e.stopPropagation(),e.preventDefault();let t=e.dataTransfer.files;displayImageDrop(t),handleFilesDrop(t)}function copyToClipboard(e){if(window.clipboardData&&window.clipboardData.setData)return clipboardData.setData("Text",e);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var t=document.createElement("textarea");t.textContent=e,t.style.position="fixed",document.body.appendChild(t),t.select();try{return document.execCommand("copy")}catch(e){return console.warn("Copy to clipboard failed.",e),!1}finally{document.body.removeChild(t)}}}dropbox.addEventListener("dragenter",dragenter,!1),dropbox.addEventListener("dragover",dragover,!1),dropbox.addEventListener("drop",drop,!1),inputElement.addEventListener("change",handleFiles,!1),inputElement.addEventListener("change",displayImage);